(()=>{"use strict";var e,t,s,a={417:(e,t,s)=>{s.d(t,{_:()=>n,createUser:()=>i,login:()=>r,r:()=>d});var a=s(959);function r(e,t){const s=(0,a.xI)();return(0,a.x9)(s,e,t)}function i(e,t,s){const r=(0,a.xI)();return(0,a.eJ)(r,e,t).then(e=>{const t=e.user;return(0,a.r7)(t,{displayName:s}).then(()=>e)})}function n(e){const t=(0,a.xI)();(0,a.hg)(t,e)}function d(){const e=(0,a.xI)();return(0,a.CI)(e)}},644:(e,t,s)=>{s.d(t,{db:()=>d,j:()=>l});var a=s(223),r=s(405),i=s(959);const n=(0,a.Wp)({apiKey:"AIzaSyCXV6yVzXzrtH7TuaqW6PQt1GxCoMvImWM",authDomain:"todoapp-96218.firebaseapp.com",projectId:"todoapp-96218",storageBucket:"todoapp-96218.firebasestorage.app",messagingSenderId:"738411019480",appId:"1:738411019480:web:9a283e6b604dc19251ebad",measurementId:"G-NWN6Z0EM08"}),d=(0,r.aU)(n),l=(0,i.xI)(n)},707:(e,t,s)=>{s.d(t,{addTask:()=>n,clearTasks:()=>o,deleteTask:()=>l,i:()=>m,loadSliderValueFromFirebase:()=>h,loadTask:()=>d,resetPassword:()=>u,updateTask:()=>c});var a=s(644),r=s(405),i=s(959);async function n(e,t=!1){const s=a.j.currentUser;s&&await(0,r.gS)((0,r.rJ)(a.db,"users",s.uid,"tasks"),{text:e,checked:t,timestamp:(0,r.O5)(),sortTimestamp:(0,r.O5)()})}async function d(){const e=a.j.currentUser;if(!e)return;const t=(0,r.rJ)(a.db,"users",e.uid,"tasks"),s=(0,r.P)(t,(0,r.My)("timestamp","asc"));return(await(0,r.GG)(s)).docs.map(e=>({id:e.id,...e.data()}))}async function l(e){const t=a.j.currentUser;t&&await(0,r.kd)((0,r.H9)(a.db,"users",t.uid,"tasks",e))}async function c(e,t){const s=a.j.currentUser;s&&await(0,r.mZ)((0,r.H9)(a.db,"users",s.uid,"tasks",e),t)}async function o(){const e=a.j.currentUser;if(!e)return;const t=(0,r.rJ)(a.db,"users",e.uid,"tasks"),s=await(0,r.GG)(t),i=[];s.forEach(t=>{i.push((0,r.kd)((0,r.H9)(a.db,"users",e.uid,"tasks",t.id)))}),await Promise.all(i)}async function u(e){try{await(0,i.J1)(a.j,e),alert("Password reset email sent. Check your inbox.")}catch(e){alert("Error: "+e.message)}}async function m(e){const t=a.j.currentUser;t&&await(0,r.BN)((0,r.H9)(a.db,"users",t.uid),{sliderValue:e},{merge:!0})}async function h(){const e=a.j.currentUser;if(!e)return null;const t=(0,r.H9)(a.db,"users",e.uid),s=await(0,r.x7)(t);return s.exists()&&void 0!==s.data().sliderValue?s.data().sliderValue:null}},774:(e,t,s)=>{s(644);var a=s(417),r=s(707);const i=document.querySelector(".h2Header"),n=document.querySelector(".modal"),d=document.querySelector(".loginButton"),l=document.querySelector(".createButton"),c=document.getElementById("email"),o=document.getElementById("password"),u=document.getElementById("name"),m=document.querySelector(".nameDiv"),h=document.querySelector(".message"),p=document.querySelector(".messageText"),k=document.querySelector(".switchCreateButton"),y=document.querySelector(".welcome"),v=document.querySelector(".logoutButton"),f=document.querySelector(".backToLoginButton"),_=document.querySelector("#loginForm"),L=document.querySelector("#resetBtn"),b=document.querySelector(".reset"),g=document.querySelector(".passDiv"),w=document.querySelector("main"),T=document.querySelector(".addTask__button"),S=document.querySelector(".addTask__input"),q=document.querySelector(".tasklist"),E=document.querySelector(".clearAll__button"),x=document.querySelector(".status__counter"),P=document.querySelector(".tasklist__task"),C=document.querySelector(".reminderSlider__sliderInput"),A=document.querySelector(".rangeValue");let I=parseInt(C.value,10);async function $(){const e=await(0,r.loadSliderValueFromFirebase)();I=null!==e?parseInt(e,10):3,C.value=I,A.innerText=I>1?`in ${I} days`:`in ${I} day`,B()}async function N(){const e=S.value.trim();""!==e?(await async function(e){const{addTask:t}=await Promise.resolve().then(s.bind(s,707));await t(e)}(e),S.value="",await j(),O()):alert("Please enter a task.")}async function j(){const{loadTask:e}=await Promise.resolve().then(s.bind(s,707)),t=await e();Array.isArray(t)&&(q.innerHTML="",t.forEach(e=>{const t=document.createElement("div"),s=e.timestamp;let a="";s?.toDate?a=s.toDate().toLocaleDateString():"string"==typeof s&&(a=new Date(s).toLocaleDateString()),t.classList.add("tasklist__newTask"),t.innerHTML=`\n  <div class="tasklist__all">\n    <input data-id="${e.id}" type="checkbox" name="task" class="tasklist__checkbox" ${e.checked?"checked":""} />\n    <p>${e.text}</p>\n    \n    <span ><span class="tasklist__timestamp">${a}</span><i class="ri-edit-2-line tasklist__edit"></i></span><span><i class="ri-calendar-schedule-line tasklist__calender"></i></span></div>\n         <div class="delete"><span class="tasklist__delete"> <i class="ri-delete-bin-6-line "></i></span></div>\n\n    `,q.appendChild(t)}))}async function O(){const{loadTask:e}=await Promise.resolve().then(s.bind(s,707)),t=await e();if(!Array.isArray(t))return x.innerText="0/0",void D();const a=t.length,r=document.querySelectorAll(".tasklist__checkbox"),i=document.querySelectorAll(".tasklist__newTask"),n=Array.from(r).filter(e=>e.checked).length;x.innerText=`${n}/${a}`,D(),a==n&&n>0?(x.classList.add("allChecked"),w.classList.add("mainChecked"),i.forEach(e=>{const t=e.querySelector(".tasklist__all"),s=e.querySelector("p");t.classList.remove("tasklist__oldestTask"),t.classList.add("tasklist__checkedTask"),s.classList.remove("tasklist__oldestTask"),s.classList.add("tasklist__checked")})):(x.classList.remove("allChecked"),w.classList.remove("mainChecked"),i.forEach(e=>{const t=e.querySelector(".tasklist__all");e.querySelector("p").classList.remove("tasklist__checked"),t.classList.remove("tasklist__checkedTask")})),n>0?r.forEach(e=>{if(e.checked){const t=e.closest(".tasklist__newTask"),s=t.querySelector(".tasklist__all"),a=t.querySelector("p");s.classList.remove("tasklist__oldestTask"),s.classList.add("tasklist__checkedTask"),a.classList.remove("tasklist__oldestTask"),a.classList.add("tasklist__checked")}}):(x.classList.remove("allChecked"),w.classList.remove("mainChecked"),i.forEach(e=>{const t=e.querySelector(".tasklist__all");e.querySelector("p").classList.remove("tasklist__checked"),t.classList.remove("tasklist__checkedTask")}))}async function D(){const{loadTask:e}=await Promise.resolve().then(s.bind(s,707)),t=await e();if(!Array.isArray(t))return;0===t.length?P.classList.add("show"):P.classList.remove("show")}async function B(){const{loadTask:e,loadSliderValueFromFirebase:t}=await Promise.resolve().then(s.bind(s,707)),[a,r]=await Promise.all([e(),t()]);Array.isArray(a)&&0!==a.length&&a.forEach(e=>{let t;if(e.timestamp?.toDate)t=e.timestamp.toDate();else{if("string"!=typeof e.timestamp)return;t=new Date(e.timestamp)}if(!t)return;const s=Date.now()-t.getTime(),a=Math.floor(s/864e5),i=document.querySelector(`input.tasklist__checkbox[data-id="${e.id}"]`)?.closest(".tasklist__newTask")?.querySelector("p");a>=r?i&&(i.classList.add("tasklist__oldestTask"),i.closest(".tasklist__all").classList.add("tasklist__oldestTask")):i&&(i.classList.remove("tasklist__oldestTask"),i.closest(".tasklist__all")?.classList.remove("tasklist__oldestTask"))})}document.addEventListener("DOMContentLoaded",async()=>{await $(),await j(),O(),D(),B(),setInterval(B,432e5)}),L.addEventListener("click",()=>{i.innerText="Reset Password",m.classList.add("hidden"),m.required=!1,d.classList.add("hidden"),k.classList.add("hidden"),f.classList.remove("hidden"),b.classList.remove("hidden"),L.classList.add("hidden"),o.classList.add("hidden"),b.setAttribute("type","submit"),o.required=!1,l.classList.add("hidden"),g.classList.add("hidden")}),v.addEventListener("click",async()=>{try{await(0,a.r)(),f.classList.add("hidden"),m.classList.add("hidden"),u.required=!1,d.classList.remove("hidden"),l.classList.add("hidden"),k.classList.remove("hidden"),o.autocomplete="current-password",p.innerText="",h.classList.add("hidden"),i.innerText="Login",b.classList.add("hidden")}catch(e){alert("Logout failed: "+e.message)}}),(0,a._)(async e=>{e?(n.classList.add("hidden"),y.innerText=e.displayName?`${e.displayName}'s`:"",h.classList.add("hidden"),p.innerText="",b.classList.add("hidden"),b.setAttribute("type","button"),o.required=!0,await j(),await $(),D(),O(),B(),document.querySelector(".app").style.visibility="visible"):(n.classList.remove("hidden"),q.innerHTML="",x.innerText="0/0",document.querySelector(".app").style.visibility="visible")}),f.addEventListener("click",()=>{f.classList.add("hidden"),m.classList.add("hidden"),u.required=!1,d.classList.remove("hidden"),l.classList.add("hidden"),k.classList.remove("hidden"),o.autocomplete="current-password",p.innerText="",h.classList.add("hidden"),i.innerText="Login",b.classList.add("hidden"),L.classList.remove("hidden"),o.classList.remove("hidden"),b.setAttribute("type","button"),o.required=!0,g.classList.remove("hidden")}),d.addEventListener("click",()=>_.requestSubmit()),l.addEventListener("click",()=>_.requestSubmit()),b.addEventListener("click",()=>_.requestSubmit()),_.addEventListener("submit",async e=>{if(e.preventDefault(),d.classList.contains("hidden"))if(l.classList.contains("hidden")||f.classList.contains("hidden")){if(!b.classList.contains("hidden"))try{const e=c.value.trim(),{resetPassword:t}=await Promise.resolve().then(s.bind(s,707));if(!e)return void alert("Please enter your email address.");await t(e),h.classList.remove("hidden"),p.innerText="Email to reset password sent",h.classList.add("messageGreen")}catch(e){alert("Error: "+e.message)}}else{const{createUser:e}=await Promise.resolve().then(s.bind(s,417)),t=c.value.trim(),a=o.value.trim(),r=u.value.trim();if(""===t||""===a||""===r)return h.classList.remove("hidden"),void(p.innerText="Please fill in all fields");try{const s=(await e(t,a,r)).user;m.classList.remove("hidden"),I=parseInt(C.value,10),A.innerText=I>1?`in ${I} days`:`in ${I} day`,y.innerText=s.displayName?`${s.displayName}'s`:"Welcome"}catch(e){h.classList.remove("hidden"),p.innerText=`Error: ${e.message}`}}else{const{login:e}=await Promise.resolve().then(s.bind(s,417)),t=c.value.trim(),a=o.value.trim();if(""===t||""===a)return h.classList.remove("hidden"),void(p.innerText="Pleasse fill in all fields");try{const s=(await e(t,a)).user;n.classList.add("hidden"),y.innerText=s.displayName?`${s.displayName}'s`:"Welcome"}catch(e){const t=e.message;h.classList.remove("hidden"),p.innerText=`Login failed: ${t}`}}}),k.addEventListener("click",()=>{m.classList.remove("hidden"),u.required=!0,d.classList.add("hidden"),k.classList.add("hidden"),l.classList.remove("hidden"),f.classList.remove("hidden"),o.autocomplete="new-password",c.autocomplete="",i.innerText="New Account",b.classList.add("hidden"),g.classList.remove("hidden")}),C.addEventListener("input",()=>{I=parseInt(C.value,10),A.innerText=I>1?`in ${I} days`:`in ${I} day`,B(),(0,r.i)(I)}),T.addEventListener("click",N),S.addEventListener("keypress",e=>{"Enter"===e.key&&""!==S.value.trim()?N():"Enter"===e.key&&""===S.value.trim()&&alert("Please enter a task.")}),q.addEventListener("click",e=>{if(e.target.closest(".tasklist__edit")){const t=e.target.closest(".tasklist__newTask"),a=t.querySelector("p"),r=a.textContent,i=t.querySelector(".tasklist__checkbox").dataset.id,n=document.createElement("textarea");n.classList.add("edit__input"),n.value=r,n.style.minWidth=`${a.offsetWidth}px`,n.style.height=`${a.offsetHeight}+2px`,a.replaceWith(n),n.focus();let d=!1;async function l(){if(d)return;d=!0;const e=n.value.trim();if(""!==e){const{updateTask:t}=await Promise.resolve().then(s.bind(s,707));await t(i,{text:e}),await j(),await B(),await O()}else n.replaceWith(a)}n.addEventListener("keydown",e=>{"Enter"===e.key&&l()}),n.addEventListener("blur",()=>l())}}),q.addEventListener("click",async e=>{const t=e.target.closest(".tasklist__calender");if(!t)return;let a=t.nextElementSibling;if(a&&a.classList.contains("calenderInput"))a._flatpickr&&a._flatpickr.open();else{a=document.createElement("input"),a.type="text",a.classList.add("calenderInput"),t.after(a);const[{default:e},r]=await Promise.all([Promise.all([s.e(404),s.e(999),s.e(120),s.e(375)]).then(s.bind(s,430)),Promise.all([s.e(404),s.e(999),s.e(120),s.e(375),s.e(162)]).then(s.bind(s,677))]),i=e(a,{defaultDate:"today",dateFormat:"Y-m-d",disableMobile:!0,onChange:()=>{i.destroy(),i.input.remove()}});i.open()}}),q.addEventListener("click",e=>{if(e.target.closest(".tasklist__delete")){!async function(e){const{deleteTask:t}=await Promise.resolve().then(s.bind(s,707));await t(e),O(),B()}(e.target.closest(".tasklist__newTask").querySelector(".tasklist__checkbox").dataset.id),j(),O()}}),q.addEventListener("change",e=>{if(e.target.classList.contains("tasklist__checkbox")){!async function(e,t){const{updateTask:a}=await Promise.resolve().then(s.bind(s,707));await a(e,{checked:t})}(e.target.closest(".tasklist__newTask").querySelector(".tasklist__checkbox").dataset.id,e.target.checked),O(),B()}}),E.addEventListener("click",()=>{!async function(){const{clearTasks:e}=await Promise.resolve().then(s.bind(s,707));await e(),document.querySelectorAll(".tasklist__newTask").forEach(e=>e.remove()),O(),D()}(),O()})}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}};return a[e](s,s.exports,i),s.exports}i.m=a,e=[],i.O=(t,s,a,r)=>{if(!s){var n=1/0;for(o=0;o<e.length;o++){for(var[s,a,r]=e[o],d=!0,l=0;l<s.length;l++)(!1&r||n>=r)&&Object.keys(i.O).every(e=>i.O[e](s[l]))?s.splice(l--,1):(d=!1,r<n&&(n=r));if(d){e.splice(o--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var o=e.length;o>0&&e[o-1][2]>r;o--)e[o]=e[o-1];e[o]=[s,a,r]},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((t,s)=>(i.f[s](e,t),t),[])),i.u=e=>{},i.miniCssF=e=>e+".styles.css",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},s="filestructure_template:",i.l=(e,a,r,n)=>{if(t[e])t[e].push(a);else{var d,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),o=0;o<c.length;o++){var u=c[o];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==s+r){d=u;break}}d||(l=!0,(d=document.createElement("script")).charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.setAttribute("data-webpack",s+r),d.src=e),t[e]=[a];var m=(s,a)=>{d.onerror=d.onload=null,clearTimeout(h);var r=t[e];if(delete t[e],d.parentNode&&d.parentNode.removeChild(d),r&&r.forEach(e=>e(a)),s)return s(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:d}),12e4);d.onerror=m.bind(null,d.onerror),d.onload=m.bind(null,d.onload),l&&document.head.appendChild(d)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var a=s.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=s[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{if("undefined"!=typeof document){var e=e=>new Promise((t,s)=>{var a=i.miniCssF(e),r=i.p+a;if(((e,t)=>{for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var r=(n=s[a]).getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(r===e||r===t))return n}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){var n;if((r=(n=i[a]).getAttribute("data-href"))===e||r===t)return n}})(a,r))return t();((e,t,s,a,r)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",i.nc&&(n.nonce=i.nc),n.onerror=n.onload=s=>{if(n.onerror=n.onload=null,"load"===s.type)a();else{var i=s&&s.type,d=s&&s.target&&s.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+i+": "+d+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=i,l.request=d,n.parentNode&&n.parentNode.removeChild(n),r(l)}},n.href=t,s?s.parentNode.insertBefore(n,s.nextSibling):document.head.appendChild(n)})(e,r,null,t,s)}),t={792:0};i.f.miniCss=(s,a)=>{t[s]?a.push(t[s]):0!==t[s]&&{162:1}[s]&&a.push(t[s]=e(s).then(()=>{t[s]=0},e=>{throw delete t[s],e}))}}})(),(()=>{var e={792:0};i.f.j=(t,s)=>{var a=i.o(e,t)?e[t]:void 0;if(0!==a)if(a)s.push(a[2]);else if(162!=t){var r=new Promise((s,r)=>a=e[t]=[s,r]);s.push(a[2]=r);var n=i.p+i.u(t),d=new Error;i.l(n,s=>{if(i.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var r=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",d.name="ChunkLoadError",d.type=r,d.request=n,a[1](d)}},"chunk-"+t,t)}else e[t]=0},i.O.j=t=>0===e[t];var t=(t,s)=>{var a,r,[n,d,l]=s,c=0;if(n.some(t=>0!==e[t])){for(a in d)i.o(d,a)&&(i.m[a]=d[a]);if(l)var o=l(i)}for(t&&t(s);c<n.length;c++)r=n[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(o)},s=self.webpackChunkfilestructure_template=self.webpackChunkfilestructure_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var n=i.O(void 0,[404,999,120,375],()=>i(774));n=i.O(n)})();
//# sourceMappingURL=main.js.map