(()=>{"use strict";const e=document.querySelector("main"),t=document.querySelector(".addTask__button"),s=document.querySelector(".addTask__input"),a=document.querySelector(".tasklist"),l=document.querySelector(".clearAll__button"),c=document.querySelector(".status__counter"),n=document.querySelector(".tasklist__task"),i=document.querySelector(".reminderSlider__sliderInput"),o=document.querySelector(".rangeValue");let r=i.value;function d(){const e=s.value.trim();if(""===e)return void alert("Please enter a task.");const t=document.createElement("div");t.classList.add("tasklist__newTask");const l=(new Date).toISOString(),c=new Date(l).toLocaleDateString();t.innerHTML=`\n  <div class="tasklist__all">\n    <input type="checkbox" name="task" class="tasklist__checkbox" />\n    <p>${e}</p>\n    <span >\n      ${c}\n      <i class="ri-edit-2-line tasklist__timestamp"></i>\n    </span>\n  </div>\n  <div class="delete">\n    <span class="tasklist__delete"><i class="ri-delete-bin-6-line"></i></span>\n  </div>\n    `,a.appendChild(t),function(e){let t=JSON.parse(localStorage.getItem("tasks"))||[];t.push({text:e,checked:!1,timestamp:(new Date).toISOString()}),localStorage.setItem("tasks",JSON.stringify(t))}(e),s.value="",k()}function k(){const t=(JSON.parse(localStorage.getItem("tasks"))||[]).length,s=document.querySelectorAll(".tasklist__checkbox"),a=document.querySelectorAll(".tasklist__newTask");s.forEach(e=>{e.addEventListener("click",k)});const l=Array.from(s).filter(e=>e.checked).length;c.innerText=`${l}/${t}`,_(),t==l&&l>0?(c.classList.add("allChecked"),e.classList.add("mainChecked"),a.forEach(e=>{const t=e.querySelector(".tasklist__all"),s=e.querySelector("p");t.classList.remove("tasklist__oldestTask"),t.classList.add("tasklist__checkedTask"),s.classList.remove("tasklist__oldestTask"),s.classList.add("tasklist__checked")})):(c.classList.remove("allChecked"),e.classList.remove("mainChecked"),a.forEach(e=>{const t=e.querySelector(".tasklist__all");e.querySelector("p").classList.remove("tasklist__checked"),t.classList.remove("tasklist__checkedTask")})),l>0?s.forEach(e=>{if(e.checked){const t=e.closest(".tasklist__newTask"),s=t.querySelector(".tasklist__all"),a=t.querySelector("p");s.classList.remove("tasklist__oldestTask"),s.classList.add("tasklist__checkedTask"),a.classList.remove("tasklist__oldestTask"),a.classList.add("tasklist__checked")}}):(c.classList.remove("allChecked"),e.classList.remove("mainChecked"),a.forEach(e=>{const t=e.querySelector(".tasklist__all");e.querySelector("p").classList.remove("tasklist__checked"),t.classList.remove("tasklist__checkedTask")}))}function _(){0===(JSON.parse(localStorage.getItem("tasks"))||[]).length?n.classList.add("show"):n.classList.remove("show")}function u(){let e=JSON.parse(localStorage.getItem("tasks"))||[];e.length>0&&e.forEach(e=>{const t=new Date,s=new Date(e.timestamp),a=Math.abs(t-s),l=Math.floor(a/864e5);console.log("taskDiffDays",l),console.log("sliderValue",r);const c=Array.from(document.querySelectorAll("p")).find(t=>e.text===t.textContent);l>=r?c&&(c.classList.add("tasklist__oldestTask"),c.closest(".tasklist__all").classList.add("tasklist__oldestTask")):(c.classList.remove("tasklist__oldestTask"),c.closest(".tasklist__all").classList.remove("tasklist__oldestTask"))})}document.addEventListener("DOMContentLoaded",()=>{(JSON.parse(localStorage.getItem("tasks"))||[]).forEach(e=>{const t=document.createElement("div"),s=e.timestamp,l=new Date(s).toLocaleDateString();t.classList.add("tasklist__newTask"),t.innerHTML=`\n  <div class="tasklist__all">\n    <input type="checkbox" name="task" class="tasklist__checkbox" ${e.checked?"checked":""} />\n    <p>${e.text}</p>\n    \n    <span class="tasklist__edit"><span class="tasklist__timestamp">${l}</span><i class="ri-edit-2-line"></i></span></div>\n         <div class="delete">     <span class="tasklist__delete"> <i class="ri-delete-bin-6-line"></i></span></div>\n         \n\n    `,a.appendChild(t)}),k(),_(),function(){const e=localStorage.getItem("sliderValue");e&&(i.value=e,o.innerText=`in ${e} days`,r=parseInt(e,10))}(),console.log("slidervalue",r),u(),setInterval(u,432e5)}),i.addEventListener("input",()=>{r=i.value,o.innerText=` in ${r} days`,function(e){localStorage.setItem("sliderValue",e)}(r),u()}),t.addEventListener("click",d),s.addEventListener("keypress",e=>{"Enter"===e.key&&""!==s.value.trim()?d():"Enter"===e.key&&""===s.value.trim()&&alert("Please enter a task.")}),a.addEventListener("click",e=>{if(e.target.closest(".tasklist__edit")){const t=e.target.closest(".tasklist__newTask"),s=t.querySelector("p").textContent,a=document.createElement("input");a.type="text",a.value=s,a.classList.add("edit__input");const l=t.querySelector("p");let c=JSON.parse(localStorage.getItem("tasks")||[]);const n=c.findIndex(e=>e.text===l.textContent);l.replaceWith(a),a.focus(),a.addEventListener("keypress",e=>{if("Enter"===e.key&&""!==a.value.trim()){const e=a.value.trim();l.textContent=e,a.replaceWith(l),-1!==n&&(c[n].text=l.textContent,localStorage.setItem("tasks",JSON.stringify(c)))}else"Enter"===e.key&&""==a.value.trim()&&a.replaceWith(l)})}}),a.addEventListener("click",e=>{if(e.target.closest(".tasklist__delete")){const t=e.target.closest(".tasklist__newTask");!function(e){let t=JSON.parse(localStorage.getItem("tasks"))||[];const s=t.findIndex(t=>t.text===e);-1!==s&&t.splice(s,1),localStorage.setItem("tasks",JSON.stringify(t)),k()}(t.querySelector("p").textContent),t.remove(),k()}}),a.addEventListener("change",e=>{if(e.target.classList.contains("tasklist__checkbox")){!function(e,t){let s=JSON.parse(localStorage.getItem("tasks"))||[];const a=s.findIndex(t=>t.text===e);-1!==a&&(s[a].checked=t),localStorage.setItem("tasks",JSON.stringify(s))}(e.target.closest(".tasklist__newTask").querySelector("p").textContent,e.target.checked),k()}}),l.addEventListener("click",()=>{localStorage.removeItem("tasks"),document.querySelectorAll(".tasklist__newTask").forEach(e=>e.remove()),k(),_(),k()})})();
//# sourceMappingURL=main.js.map