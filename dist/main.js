(()=>{"use strict";var e,t={417:(e,t,s)=>{s.d(t,{_:()=>r,createUser:()=>n,login:()=>i,r:()=>d});var a=s(959);function i(e,t){const s=(0,a.getAuth)();return(0,a.x9)(s,e,t)}function n(e,t,s){const i=(0,a.getAuth)();return(0,a.eJ)(i,e,t).then(e=>{const t=e.user;return(0,a.r7)(t,{displayName:s}).then(()=>e)})}function r(e){const t=(0,a.getAuth)();(0,a.hg)(t,e)}function d(){const e=(0,a.getAuth)();return(0,a.CI)(e)}},644:(e,t,s)=>{s.d(t,{db:()=>d,j:()=>c});var a=s(223),i=s(405),n=s(959);const r=(0,a.Wp)({apiKey:"AIzaSyCXV6yVzXzrtH7TuaqW6PQt1GxCoMvImWM",authDomain:"todoapp-96218.firebaseapp.com",projectId:"todoapp-96218",storageBucket:"todoapp-96218.firebasestorage.app",messagingSenderId:"738411019480",appId:"1:738411019480:web:9a283e6b604dc19251ebad",measurementId:"G-NWN6Z0EM08"}),d=(0,i.getFirestore)(r),c=(0,n.getAuth)(r)},707:(e,t,s)=>{s.d(t,{addTask:()=>r,clearTasks:()=>o,deleteTask:()=>c,i:()=>m,loadTask:()=>d,m:()=>h,resetPassword:()=>u,updateTask:()=>l});var a=s(644),i=s(405),n=s(959);async function r(e,t=!1){const s=a.j.currentUser;s&&await(0,i.gS)((0,i.rJ)(a.db,"users",s.uid,"tasks"),{text:e,checked:t,timestamp:(new Date).toISOString()})}async function d(){const e=a.j.currentUser;if(!e)return;return(await(0,i.GG)((0,i.rJ)(a.db,"users",e.uid,"tasks"))).docs.map(e=>({id:e.id,...e.data()}))}async function c(e){const t=a.j.currentUser;t&&await(0,i.kd)((0,i.doc)(a.db,"users",t.uid,"tasks",e))}async function l(e,t){const s=a.j.currentUser;s&&await(0,i.mZ)((0,i.doc)(a.db,"users",s.uid,"tasks",e),t)}async function o(){const e=a.j.currentUser;if(!e)return;const t=(0,i.rJ)(a.db,"users",e.uid,"tasks"),s=await(0,i.GG)(t),n=[];s.forEach(t=>{n.push((0,i.kd)((0,i.doc)(a.db,"users",e.uid,"tasks",t.id)))}),await Promise.all(n)}async function u(e){try{await(0,n.J1)(a.j,e),alert("Password reset email sent. Check your inbox.")}catch(e){alert("Error: "+e.message)}}async function m(e){const{getAuth:t}=await Promise.resolve().then(s.bind(s,959)),{getFirestore:a,doc:i,setDoc:n}=await Promise.resolve().then(s.bind(s,405)),r=t(),d=a(),c=r.currentUser;c&&await n(i(d,"users",c.uid),{sliderValue:e},{merge:!0})}async function h(){const{getAuth:e}=await Promise.resolve().then(s.bind(s,959)),{getFirestore:t,doc:a,getDoc:i}=await Promise.resolve().then(s.bind(s,405)),n=e(),r=t(),d=n.currentUser;if(!d)return null;const c=await i(a(r,"users",d.uid));return c.exists()&&void 0!==c.data().sliderValue?c.data().sliderValue:null}},774:(e,t,s)=>{s(644);var a=s(417),i=s(707);const n=document.querySelector(".h2Header"),r=document.querySelector(".modal"),d=document.querySelector(".loginButton"),c=document.querySelector(".createButton"),l=document.getElementById("email"),o=document.getElementById("password"),u=document.getElementById("name"),m=document.querySelector(".nameDiv"),h=document.querySelector(".message"),k=document.querySelector(".messageText"),v=document.querySelector(".switchCreateButton"),y=document.querySelector(".welcome"),L=document.querySelector(".logoutButton"),_=document.querySelector(".backToLoginButton"),p=document.querySelector("#loginForm"),f=document.querySelector("#resetBtn"),w=document.querySelector(".reset"),b=document.querySelector(".passDiv"),g=document.querySelector("main"),T=document.querySelector(".addTask__button"),q=document.querySelector(".addTask__input"),S=document.querySelector(".tasklist"),x=document.querySelector(".clearAll__button"),E=document.querySelector(".status__counter"),P=document.querySelector(".tasklist__task"),A=document.querySelector(".reminderSlider__sliderInput"),$=document.querySelector(".rangeValue");let I=parseInt(A.value,10);async function C(){const e=await(0,i.m)();I=null!==e?parseInt(e,10):3,A.value=I,$.innerText=I>1?`in ${I} days`:`in ${I} day`,N()}async function j(){const e=q.value.trim();""!==e?(await async function(e){const{addTask:t}=await Promise.resolve().then(s.bind(s,707));await t(e)}(e),q.value="",await O(),D()):alert("Please enter a task.")}async function O(){const{loadTask:e}=await Promise.resolve().then(s.bind(s,707)),t=await e();Array.isArray(t)&&(S.innerHTML="",t.forEach(e=>{const t=document.createElement("div"),s=e.timestamp,a=new Date(s).toLocaleDateString();t.classList.add("tasklist__newTask"),t.innerHTML=`\n  <div class="tasklist__all">\n    <input data-id="${e.id}" type="checkbox" name="task" class="tasklist__checkbox" ${e.checked?"checked":""} />\n    <p>${e.text}</p>\n    \n    <span ><span class="tasklist__timestamp">${a}</span><i class="ri-edit-2-line tasklist__edit"></i></span><span><i class="ri-calendar-schedule-line tasklist__calender"></i></span></div>\n         <div class="delete"><span class="tasklist__delete"> <i class="ri-delete-bin-6-line "></i></span></div>\n\n    `,S.appendChild(t)}))}async function D(){const{loadTask:e}=await Promise.resolve().then(s.bind(s,707)),t=await e();if(!Array.isArray(t))return E.innerText="0/0",void B();const a=t.length,i=document.querySelectorAll(".tasklist__checkbox"),n=document.querySelectorAll(".tasklist__newTask"),r=Array.from(i).filter(e=>e.checked).length;E.innerText=`${r}/${a}`,B(),a==r&&r>0?(E.classList.add("allChecked"),g.classList.add("mainChecked"),n.forEach(e=>{const t=e.querySelector(".tasklist__all"),s=e.querySelector("p");t.classList.remove("tasklist__oldestTask"),t.classList.add("tasklist__checkedTask"),s.classList.remove("tasklist__oldestTask"),s.classList.add("tasklist__checked")})):(E.classList.remove("allChecked"),g.classList.remove("mainChecked"),n.forEach(e=>{const t=e.querySelector(".tasklist__all");e.querySelector("p").classList.remove("tasklist__checked"),t.classList.remove("tasklist__checkedTask")})),r>0?i.forEach(e=>{if(e.checked){const t=e.closest(".tasklist__newTask"),s=t.querySelector(".tasklist__all"),a=t.querySelector("p");s.classList.remove("tasklist__oldestTask"),s.classList.add("tasklist__checkedTask"),a.classList.remove("tasklist__oldestTask"),a.classList.add("tasklist__checked")}}):(E.classList.remove("allChecked"),g.classList.remove("mainChecked"),n.forEach(e=>{const t=e.querySelector(".tasklist__all");e.querySelector("p").classList.remove("tasklist__checked"),t.classList.remove("tasklist__checkedTask")}))}async function B(){const{loadTask:e}=await Promise.resolve().then(s.bind(s,707)),t=await e();if(!Array.isArray(t))return;0===t.length?P.classList.add("show"):P.classList.remove("show")}async function N(){const{loadTask:e}=await Promise.resolve().then(s.bind(s,707)),t=await e();Array.isArray(t)&&0!==t.length&&t.forEach(e=>{const t=new Date,s=new Date(e.timestamp),a=Math.abs(t-s),i=Math.floor(a/864e5),n=document.querySelector(`input.tasklist__checkbox[data-id="${e.id}"]`)?.closest(".tasklist__newTask")?.querySelector("p");i>=I?n&&(n.classList.add("tasklist__oldestTask"),n.closest(".tasklist__all").classList.add("tasklist__oldestTask")):n&&(n.classList.remove("tasklist__oldestTask"),n.closest(".tasklist__all")?.classList.remove("tasklist__oldestTask"))})}document.addEventListener("DOMContentLoaded",async()=>{await C(),await O(),D(),B(),N(),setInterval(N,432e5)}),f.addEventListener("click",()=>{n.innerText="Reset Password",m.classList.add("hidden"),m.required=!1,d.classList.add("hidden"),v.classList.add("hidden"),_.classList.remove("hidden"),w.classList.remove("hidden"),f.classList.add("hidden"),o.classList.add("hidden"),w.setAttribute("type","submit"),o.required=!1,c.classList.add("hidden"),b.classList.add("hidden")}),L.addEventListener("click",async()=>{try{await(0,a.r)(),_.classList.add("hidden"),m.classList.add("hidden"),u.required=!1,d.classList.remove("hidden"),c.classList.add("hidden"),v.classList.remove("hidden"),o.autocomplete="current-password",k.innerText="",h.classList.add("hidden"),n.innerText="Login",w.classList.add("hidden")}catch(e){alert("Logout failed: "+e.message)}}),(0,a._)(async e=>{e?(r.classList.add("hidden"),y.innerText=e.displayName?`${e.displayName}'s`:"",h.classList.add("hidden"),k.innerText="",w.classList.add("hidden"),w.setAttribute("type","button"),o.required=!0,await O(),await C(),B(),D(),N(),document.querySelector(".app").style.visibility="visible"):(r.classList.remove("hidden"),S.innerHTML="",E.innerText="0/0",document.querySelector(".app").style.visibility="visible")}),_.addEventListener("click",()=>{_.classList.add("hidden"),m.classList.add("hidden"),u.required=!1,d.classList.remove("hidden"),c.classList.add("hidden"),v.classList.remove("hidden"),o.autocomplete="current-password",k.innerText="",h.classList.add("hidden"),n.innerText="Login",w.classList.add("hidden"),f.classList.remove("hidden"),o.classList.remove("hidden"),w.setAttribute("type","button"),o.required=!0,b.classList.remove("hidden")}),d.addEventListener("click",()=>p.requestSubmit()),c.addEventListener("click",()=>p.requestSubmit()),w.addEventListener("click",()=>p.requestSubmit()),p.addEventListener("submit",async e=>{if(e.preventDefault(),d.classList.contains("hidden"))if(c.classList.contains("hidden")||_.classList.contains("hidden")){if(!w.classList.contains("hidden"))try{const e=l.value.trim(),{resetPassword:t}=await Promise.resolve().then(s.bind(s,707));if(!e)return void alert("Please enter your email address.");await t(e),h.classList.remove("hidden"),k.innerText="Email to reset password sent",h.classList.add("messageGreen")}catch(e){alert("Error: "+e.message)}}else{const{createUser:e}=await Promise.resolve().then(s.bind(s,417)),t=l.value.trim(),a=o.value.trim(),i=u.value.trim();if(""===t||""===a||""===i)return h.classList.remove("hidden"),void(k.innerText="Please fill in all fields");try{const s=(await e(t,a,i)).user;m.classList.remove("hidden"),I=parseInt(A.value,10),$.innerText=I>1?`in ${I} days`:`in ${I} day`,y.innerText=s.displayName?`${s.displayName}'s`:"Welcome"}catch(e){h.classList.remove("hidden"),k.innerText=`Error: ${e.message}`}}else{const{login:e}=await Promise.resolve().then(s.bind(s,417)),t=l.value.trim(),a=o.value.trim();if(""===t||""===a)return h.classList.remove("hidden"),void(k.innerText="Pleasse fill in all fields");try{const s=(await e(t,a)).user;r.classList.add("hidden"),y.innerText=s.displayName?`${s.displayName}'s`:"Welcome"}catch(e){const t=e.message;h.classList.remove("hidden"),k.innerText=`Login failed: ${t}`}}}),v.addEventListener("click",()=>{m.classList.remove("hidden"),u.required=!0,d.classList.add("hidden"),v.classList.add("hidden"),c.classList.remove("hidden"),_.classList.remove("hidden"),o.autocomplete="new-password",l.autocomplete="",n.innerText="New Account",w.classList.add("hidden"),b.classList.remove("hidden")}),A.addEventListener("input",()=>{I=parseInt(A.value,10),$.innerText=I>1?`in ${I} days`:`in ${I} day`,N(),(0,i.i)(I)}),T.addEventListener("click",j),q.addEventListener("keypress",e=>{"Enter"===e.key&&""!==q.value.trim()?j():"Enter"===e.key&&""===q.value.trim()&&alert("Please enter a task.")}),S.addEventListener("click",e=>{if(e.target.closest(".tasklist__edit")){const t=e.target.closest(".tasklist__newTask"),a=t.querySelector("p"),i=a.textContent,n=t.querySelector(".tasklist__checkbox").dataset.id,r=document.createElement("textarea");r.classList.add("edit__input"),r.value=i,r.style.width=`${a.offsetWidth}px`,r.style.height=`${a.offsetHeight}px`,a.replaceWith(r),r.focus();let d=!1;async function c(){if(d)return;d=!0;const e=r.value.trim();if(""!==e){const{updateTask:t}=await Promise.resolve().then(s.bind(s,707));await t(n,{text:e}),await O(),await D()}else r.replaceWith(a)}r.addEventListener("keydown",e=>{"Enter"===e.key&&c()}),r.addEventListener("blur",()=>c())}}),S.addEventListener("click",e=>{const t=e.target.closest(".tasklist__calender");if(!t)return;console.log("calenderbutton");const s=t.nextElementSibling;if(s&&s.classList.contains("calenderInput"))s.classList.remove("hide"),s.classList.add("show"),s.focus();else{const e=document.createElement("input");e.type="date",e.classList.add("calenderInput","show"),e.addEventListener("blur",()=>e.classList.add("hide")),t.after(e),e.focus()}}),S.addEventListener("click",e=>{if(e.target.closest(".tasklist__delete")){!async function(e){const{deleteTask:t}=await Promise.resolve().then(s.bind(s,707));await t(e),D()}(e.target.closest(".tasklist__newTask").querySelector(".tasklist__checkbox").dataset.id),O(),D()}}),S.addEventListener("change",e=>{if(e.target.classList.contains("tasklist__checkbox")){!async function(e,t){const{updateTask:a}=await Promise.resolve().then(s.bind(s,707));await a(e,{checked:t})}(e.target.closest(".tasklist__newTask").querySelector(".tasklist__checkbox").dataset.id,e.target.checked),D(),N()}}),x.addEventListener("click",()=>{!async function(){const{clearTasks:e}=await Promise.resolve().then(s.bind(s,707));await e(),document.querySelectorAll(".tasklist__newTask").forEach(e=>e.remove()),D(),B()}(),D()})}},s={};function a(e){var i=s[e];if(void 0!==i)return i.exports;var n=s[e]={exports:{}};return t[e](n,n.exports,a),n.exports}a.m=t,e=[],a.O=(t,s,i,n)=>{if(!s){var r=1/0;for(o=0;o<e.length;o++){for(var[s,i,n]=e[o],d=!0,c=0;c<s.length;c++)(!1&n||r>=n)&&Object.keys(a.O).every(e=>a.O[e](s[c]))?s.splice(c--,1):(d=!1,n<r&&(r=n));if(d){e.splice(o--,1);var l=i();void 0!==l&&(t=l)}}return t}n=n||0;for(var o=e.length;o>0&&e[o-1][2]>n;o--)e[o]=e[o-1];e[o]=[s,i,n]},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={792:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var i,n,[r,d,c]=s,l=0;if(r.some(t=>0!==e[t])){for(i in d)a.o(d,i)&&(a.m[i]=d[i]);if(c)var o=c(a)}for(t&&t(s);l<r.length;l++)n=r[l],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(o)},s=self.webpackChunkfilestructure_template=self.webpackChunkfilestructure_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var i=a.O(void 0,[375,999,120],()=>a(774));i=a.O(i)})();
//# sourceMappingURL=main.js.map