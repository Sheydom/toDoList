"use strict";(self.webpackChunkfilestructure_template=self.webpackChunkfilestructure_template||[]).push([[707],{707:(s,t,a)=>{a.d(t,{addTask:()=>i,clearTasks:()=>l,deleteTask:()=>d,loadTask:()=>u,resetPassword:()=>k,saveEmail:()=>c,updateTask:()=>o});var e=a(644),r=a(405),n=a(959);async function i(s,t=null){const a=e.j.currentUser;a&&await(0,r.gS)((0,r.rJ)(e.db,"users",a.uid,"tasks"),{text:s,checked:!1,timestamp:(0,r.O5)(),sortTimestamp:(0,r.O5)(),...t&&{deadline:t}})}async function c(){const s=e.j.currentUser;if(!s)return;const t=s.email,a=(0,r.H9)(e.db,"users",s.uid),n=await(0,r.x7)(a);n.exists()&&n.data().email||await(0,r.BN)(a,{email:t},{merge:!0})}async function u(){const s=e.j.currentUser;if(!s)return;const t=(0,r.rJ)(e.db,"users",s.uid,"tasks"),a=(0,r.P)(t,(0,r.My)("timestamp","asc"));return(await(0,r.GG)(a)).docs.map(s=>({id:s.id,...s.data()}))}async function d(s){const t=e.j.currentUser;t&&await(0,r.kd)((0,r.H9)(e.db,"users",t.uid,"tasks",s))}async function o(s,t){const a=e.j.currentUser;a&&await(0,r.mZ)((0,r.H9)(e.db,"users",a.uid,"tasks",s),t)}async function l(){const s=e.j.currentUser;if(!s)return;const t=(0,r.rJ)(e.db,"users",s.uid,"tasks"),a=await(0,r.GG)(t),n=[];a.forEach(t=>{n.push((0,r.kd)((0,r.H9)(e.db,"users",s.uid,"tasks",t.id)))}),await Promise.all(n)}async function k(s){try{await(0,n.J1)(e.j,s),alert("Password reset email sent. Check your inbox.")}catch(s){alert("Error: "+s.message)}}}}]);